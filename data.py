# data.py
import pandas as pd

# ===============================
# 공통 지역 데이터
# ===============================
REGION_LIST = ["서울","부산","대구","인천","광주","대전","울산","세종"]
LATS = [37.5665,35.1796,35.8714,37.4563,35.1595,36.3504,35.5384,36.4809]
LONS = [126.9780,129.0756,128.6014,126.7052,126.8526,127.3845,129.3114,127.2890]

# ===============================
# 등록 데이터 (연도별)
# ===============================
REGISTER_YEAR_DATA = {
    "2021": {
        "승용":[40000,13000,11000,9000,7500,5500,4500,1800],
        "승합":[1800,900,700,600,400,350,250,90],
        "화물":[7000,2500,1900,1400,1100,950,850,320],
        "특수":[250,120,90,70,55,45,35,12],
    },
    "2022": {
        "승용":[42000,14000,11500,9500,7700,5800,4700,1900],
        "승합":[1850,950,720,610,420,360,260,95],
        "화물":[7200,2600,1950,1450,1150,970,860,330],
        "특수":[260,130,95,72,58,47,38,13],
    },
    "2023": {
        "승용":[45000,15000,12000,10000,8000,6000,5000,2000],
        "승합":[2000,1000,800,700,500,400,300,100],
        "화물":[8000,3000,2000,1500,1200,1000,900,300],
        "특수":[300,150,100,80,60,50,40,10],
    },
    "2024": {
        "승용":[47000,16000,12500,11000,8500,6500,5200,2200],
        "승합":[2100,1100,850,750,550,430,320,110],
        "화물":[8300,3200,2100,1600,1300,1100,920,340],
        "특수":[320,160,110,90,70,55,45,12],
    },
    "2025": {
        "승용":[50000,17000,13000,11500,9000,7000,5500,2300],
        "승합":[2200,1200,900,780,600,480,350,120],
        "화물":[8500,3400,2300,1700,1400,1200,980,360],
        "특수":[330,170,120,95,75,60,48,15],
    }
}

# ===============================
# 폐차 데이터 생성 함수
# ===============================
def generate_scrap_data(year):
    base = {
        "승용":[6000,1800,1500,1200,900,700,600,250],
        "승합":[250,120,100,90,70,55,40,12],
        "화물":[900,350,220,160,130,110,100,35],
        "특수":[35,18,12,10,7,6,5,2]
    }

    factor = 1 - (year - 2021) * 0.02

    return pd.DataFrame({
        "지역": REGION_LIST,
        "승용":[int(v*factor) for v in base["승용"]],
        "승합":[int(v*factor) for v in base["승합"]],
        "화물":[int(v*factor) for v in base["화물"]],
        "특수":[int(v*factor) for v in base["특수"]],
        "lat": LATS,
        "lon": LONS
    })

# ===============================
# 폐차 합산 함수
# ===============================
def sum_scrap_years(years):
    total = None
    for y in years:
        temp = generate_scrap_data(y)
        if total is None:
            total = temp.copy()
        else:
            total[["승용","승합","화물","특수"]] += temp[["승용","승합","화물","특수"]]
    return total